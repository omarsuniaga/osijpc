var Y=Object.defineProperty,q=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var N=(r,t,o)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,S=(r,t)=>{for(var o in t||(t={}))V.call(t,o)&&N(r,o,t[o]);if(T)for(var o of T(t))K.call(t,o)&&N(r,o,t[o]);return r},y=(r,t)=>q(r,B(t));import{Y as g,h as u,j as p,k as e,F as w,n as A,t as x,Z as C,r as _,_ as Q,$ as m,b as z,D as L,K as G,Q as Z,m as D,a0 as J,a1 as W,l as I,a2 as X,N as $,a3 as O,a4 as F}from"./vendor.ffe9a40f.js";import{s as H,d as b}from"./index.20328d54.js";const ee={class:"pt-1 m-1 align-middle inline-block sm:px-6 lg:px-8"},te={class:"shadow-md sm:rounded-lg"},se={class:"w-full divide-gray-300"},oe=e("thead",null,[e("h1",{class:"text-black mx-3 px-6 py-3 text-xs font-medium uppercase tracking-wider text-center"}," LISTADO ")],-1),ae={class:"divide-gray-800 bg-red-200"},le=["onClick"],ne={class:"flex-shrink-0 w-12 pt-1"},re=["src"],de={class:"items-center"},ie={class:"p-1"},ce={class:"text-[12px] font-medium text-black"},ue={class:"text-[10px] text-gray-500 font-sans"},pe={setup(r){const t=g("LISTADOS"),o=g("PRESENTES");g("AUSENTES");const c=async d=>{t.value.map(s=>s.id===d.id?(s.estado=!0)&&v(s):null)},v=d=>{t.value=t.value.filter(s=>s.estado!==!0),o.value.push(y(S({},d),{estado:!0}))};return(d,s)=>(u(),p("div",null,[e("div",ee,[e("div",te,[e("table",se,[oe,e("tbody",ae,[(u(!0),p(w,null,A(C(t),i=>(u(),p("tr",{key:i.id,class:"hover:bg-violet-400 active:bg-violet-600 border-b border-gray-400 flex gap-1 items-center justify-items-center align-middle",onClick:E=>c(i)},[e("td",ne,[e("img",{class:"rounded-full",src:i.foto,alt:""},null,8,re)]),e("th",de,[e("div",ie,[e("div",ce,x(i.nombreCompleto),1),e("div",ue,x(i.grupo),1)])])],8,le))),128))])])])])]))}},ve={class:""},he={class:"p-1 align-middle inline-block sm:px-6 lg:px-8"},_e={class:"shadow-md sm:rounded-lg"},me={class:"w-full divide-gray-300"},fe=e("thead",null,[e("h1",{class:"text-black mx-3 px-6 py-3 text-center text-xs font-medium uppercase tracking-wider"}," PRESENTES ")],-1),ge={class:"divide-gray-800 bg-green-200"},xe=["onClick"],be=["src"],Se={class:"text-[12px] font-medium text-black text-center w-auto"},ye={class:"font-medium"},Ee={class:"text-sky-500 dark:text-black"},we={class:"text-slate-700 dark:text-blue-900"},Ae={setup(r){const t=g("PRESENTES"),o=g("LISTADOS"),c=async v=>{v.estado=!1,o.value.push(v),t.value=t.value.filter(d=>d.estado!==!1)};return(v,d)=>(u(),p("div",ve,[e("div",he,[e("div",_e,[e("table",me,[fe,e("tbody",ge,[(u(!0),p(w,null,A(C(t),(s,i)=>(u(),p("div",{key:i,class:"hover:bg-violet-400 px-4 active:bg-violet-600 border-b border-gray-400 flex gap-1 items-center justify-items-center align-middle",onClick:E=>c(s)},[e("img",{src:s.foto,class:"rounded-full w-12 pt-1",alt:""},null,8,be),e("div",Se,[e("figcaption",ye,[e("div",Ee,x(s.nombreCompleto),1),e("div",we,x(s.grupo),1)])])],8,xe))),128))])])])])]))}},Ce={class:"fixed top-14 mt-2 h-full w-full"},$e={class:"flex gap-0 items-center justify-between py-2 bg-slate-300"},ke={class:"w-1/3 px-1 text-left text-xs font-medium text-gray-500 uppercase"},Te={class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-1 py-2 rounded shadow leading-tight focus:outline-none focus:shadow-outline"},Ne=["value"],Le={class:"px-2 w-1/3 text-left text-xs font-medium text-gray-500 uppercase"},De=["hidden"],Ie={class:"grid grid-cols-2 gap-1 mt-1 sm:-mx-6 lg:-mx-8 absolute top-16 bottom-16 overflow-y-auto"},Pe={setup(r){const t=_({}),o=_([]),c=_([]),v=_([]),d=moment().format("YYYY-MM-DD"),s=_(d),i=_([{text:"Teoria y Solfeo",value:"Teoria-Solfeo"},{text:"Orquesta",value:"Orquesta"},{text:"Coro",value:"Coro"}]);Q(()=>s.value!==d?k():null),m("ALUMNOS",t),m("LISTADOS",o),m("PRESENTES",c),m("AUSENTES",v),m("FECHAHOY",d),m("CLASE",i),z(async()=>{k()});const E=async()=>{const a=L(b,"ALUMNOS");(await D(a)).forEach(n=>{let h={},f=n.data();h.id=f.id,h.foto=f.foto,h.nombreCompleto=f.nombre+" "+f.apellido,h.grupo=f.grupo,h.estado=!1,P(h)})},P=a=>o.value.push(a),R=async a=>{const l=await $(b,"ASISTENCIA",s.value);return await O(l,{FECHA:s.value,listado:F({nombreCompleto:a.nombreCompleto,estado:!0,id:a.id})})},j=async a=>{const l=await $(b,"ASISTENCIA",s.value);return await O(l,{FECHA:s.value,listado:F({nombreCompleto:a.nombreCompleto,estado:!1,id:a.id})})},M=async()=>{if(i.value!==""){await X($(b,"ASISTENCIA",s.value),{FECHA:s.value,CLASE:i.value});try{c.value.map(async a=>await R(a)),o.value.map(async a=>await j(a))}catch(a){console.error("Error adding document: ",a)}return alert("Listado Actualizado")}else alert("Debes seleccionar una Clase")},k=async()=>{let a=L(b,"ASISTENCIA"),l=G(a,Z("FECHA","==",s.value)),n=await D(l);if(n.empty){c.value=[],o.value=[],E();return}else return await U(n.docs[0].data())},U=async a=>{c.value=[],o.value=[],console.log(a),a.listado.map(l=>{l.estado?H(l.id).then(n=>{c.value.push(y(S({},l),{foto:n.foto}))}):H(l.id).then(n=>{o.value.push(y(S({},l),{foto:n.foto}))})})};return(a,l)=>(u(),p("div",Ce,[e("div",$e,[e("div",ke,[e("select",Te,[(u(!0),p(w,null,A(i.value,n=>(u(),p("option",{value:n.value},x(n.text),9,Ne))),256))])]),e("div",null,[J(e("input",{type:"date",name:"SearchDate","onUpdate:modelValue":l[0]||(l[0]=n=>s.value=n),class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-1 py-1 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline"},null,512),[[W,s.value]])]),e("div",Le,[e("button",{type:"button",hidden:s.value!==C(d),class:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-1 rounded-full shadow-xl",onClick:l[1]||(l[1]=n=>M())}," Guardar ",8,De)])]),e("div",Ie,[e("div",null,[I(pe)]),e("div",null,[I(Ae)])])]))}};export{Pe as default};
